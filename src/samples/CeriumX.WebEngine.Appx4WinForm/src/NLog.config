<!--<?xml version="1.0" encoding="utf-8" ?>-->
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xsi:schemaLocation="http://www.nlog-project.org/schemas/NLog.xsd NLog.xsd"
      autoReload="true"
      throwExceptions="false"
      internalLogLevel="Off" internalLogFile="c:\temp\nlog-internal.log">

	<variable name="outputdate" value="${date:format=yyyyMM}"/>
	<variable name="customdate" value="${date:format=yyyy-MM-dd HH\:mm\:ss.fff}"/>
	<variable name="defaultlayout" value="${customdate} ${message}${exception:format=ToString}" />

	<targets>
		<target name="syslogger" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/system/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>

		
		<target name="NatashaLogger" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/Natasha/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>

		<target name="MonicaLogger" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/Monica/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>

		
		<target name="MessagingKafka" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/MessagingKafka/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>
		
		<target name="MessagingRabbitMQ" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/MessagingRabbitMQ/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>
		
		<target name="MessagingLocalMQ" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/MessagingLocalMQ/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>
		
		<target name="MessagingServiceBus" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/MessagingServiceBus/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>
		
		<target name="LocalizedBridgedLogger" xsi:type="AsyncWrapper" queueLimit="50000" overflowAction="Block">
			<target xsi:type="File" keepFileOpen="true" openFileCacheTimeout="30"
					fileName="${basedir}/logs/LocalizedBridged/${outputdate}/${shortdate}-${level}.log"
					layout="${defaultlayout}" />
		</target>
	</targets>


	<rules>
		<logger name ="Natasha.*" minlevel="Debug" final="true" writeTo="NatashaLogger"/>
		<logger name ="Monica.*" minlevel="Debug" final="true" writeTo="MonicaLogger"/>

		<logger name ="MsgKafka.*" minlevel="Debug" final="true" writeTo="MessagingKafka"/>
		<logger name ="MsgRabbitMQ.*" minlevel="Debug" final="true" writeTo="MessagingRabbitMQ"/>
		<logger name ="MsgLocalMQ.*" minlevel="Debug" final="true" writeTo="MessagingLocalMQ"/>
		<logger name ="MsgServiceBus.*" minlevel="Debug" final="true" writeTo="MessagingServiceBus"/>
		<logger name ="LocalizedBridged.*" minlevel="Debug" final="true" writeTo="LocalizedBridgedLogger"/>

		<logger name="*" minlevel="Debug" writeTo="syslogger" />
	</rules>
</nlog>
